import{S as D,C as E,P as O,W as U,O as V,V as t,B as j,M as _,a as y,b as q,A as X,c as J,d as B,L as G,e as L,f as A,D as K}from"./OrbitControls-DiHyoYJg.js";import{d as N,o as F,a as Q,c as Y,r as H,b as Z,_ as $}from"./index-g0HVmmej.js";const ee=60,te=N({__name:"ThreePage",setup(ne){const M=H(null);let r=null,n=null,o=null,a=null,u=null,s=null,w=null,p,f;const l=1e3/ee;let d=0;const R=H(0);let h=0,P=0,x=0,v=0;F(()=>{const e=M.value;if(!e){console.error("未找到 Canvas 元素");return}T(e)}),F(()=>{console.log("ThreePage mounted")});function T(e){n=new D,n.background=new E(0),o=new O(75,e.clientWidth/e.clientHeight,.1,1e3),o.position.set(0,40,0),r=new U({canvas:e,antialias:!0,alpha:!0}),r.setSize(e.clientWidth,e.clientHeight,!1),r.setPixelRatio(window.devicePixelRatio),a=new V(o,e),a.target=new t(0,0,0),a.update(),a.enableDamping=!0;const c=new j(4,4,4),i=new _({color:65280,wireframe:!0});s=new y(c,i),s.position.y=5,n.add(s);const g=new q(1,10,10),C=new _({color:16711680});w=new y(g,C),n.add(w);const m=new X(5);n.add(m);const S=new J(10,10);S.rotateX(-Math.PI/2);const W=[new t(10,5,10),new t(5,10,-10),new t(-10,5,0)],k=[new t(-40,30,20),new t(-20,40,30),new t(0,30,40),new t(20,40,30),new t(40,30,20),new t(20,20,0),new t(0,30,-20),new t(-20,20,0)];f=new B(W,!0),p=new B(k,!0);const I=new G(new L().setFromPoints(p.getPoints(100)),new A({color:65280}));n.add(I);const z=new G(new L().setFromPoints(f.getPoints(100)),new A({color:16711680}));n.add(z),n.add(new y(S,new _({color:10066329,side:K}))),window.addEventListener("resize",()=>{!o||!r||!e||(o.aspect=e.clientWidth/e.clientHeight,o.updateProjectionMatrix(),r.setSize(e.clientWidth,e.clientHeight,!1))}),d=performance.now(),h=d,b(performance.now())}function b(e){u=requestAnimationFrame(b);const c=e-d;if(c>=l){if(d=e-c%l,s){const i=.001*l;s.rotation.x+=i,s.rotation.y+=i}if(s&&o){x+=5e-4*l,v+=5e-5*l;const i=x%1,g=v%1,C=p.getPointAt(g),m=f.getPointAt(i);o.position.copy(C),w.position.copy(m),a?.target.copy(m),a?.update()}a?.update(),r?.render(n,o),P++,e-h>=1e3&&(R.value=Math.round(P),P=0,h=e)}}return Q(()=>{u&&cancelAnimationFrame(u),a&&a.dispose(),r&&r.dispose(),n=null,o=null,r=null,a=null}),(e,c)=>(Z(),Y("canvas",{id:"threeCanvas",ref_key:"canvasRef",ref:M,class:"three-canvas"},null,512))}}),re=$(te,[["__scopeId","data-v-1e9086e8"]]);export{re as default};
